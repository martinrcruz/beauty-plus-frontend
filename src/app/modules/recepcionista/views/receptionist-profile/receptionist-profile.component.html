<div class="container mt-5 profile-form">
  <h2 class="mb-4">Modificar Datos Personales</h2>

  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

  <div class="row">
    <!-- Sección Izquierda: Avatar -->
    <div class="col-md-3 text-center">
      <div class="avatar-container mb-3">
        <!-- Muestra la imagen si existe, o un placeholder -->
        <img
        [src]="avatarPreview || user.avatar || 'assets/images/placeholder.png'"
        alt="avatar"
          class="avatar-image"
        />
        <div class="avatar-overlay" (click)="onChangeAvatar()">
          <span class="avatar-icon bi bi-camera"></span>
          <span class="avatar-text">Cambiar avatar</span>
        </div>
      </div>

      <!-- Input oculto para subir archivo -->
      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        accept="image/*"
        class="d-none"
      />
    </div>

    <!-- Sección Derecha: Formulario -->
    <div class="col-md-9">
      <form>
        <div class="row g-3">
          <div class="col-sm-6">
            <label class="form-label fw-bold">Nombre completo</label>
            <input class="form-control" [(ngModel)]="user.fullName" name="fullName" />
          </div>
          <div class="col-sm-6">
            <label class="form-label fw-bold">DNI</label>
            <input class="form-control" [(ngModel)]="user.dni" name="dni" />
          </div>

          <div class="col-sm-6">
            <label class="form-label fw-bold">Fecha de nacimiento</label>
            <input
              type="date"
              class="form-control"
              [(ngModel)]="user.dateOfBirth"
              name="dateOfBirth"
            />
          </div>
          <div class="col-sm-6">
            <label class="form-label fw-bold">Domicilio</label>
            <input class="form-control" [(ngModel)]="user.address" name="address" />
          </div>

          <!-- <div class="col-sm-6">
            <label class="form-label fw-bold">Password</label>
            <input
              type="password"
              class="form-control"
              [(ngModel)]="password"
              name="password"
            />
          </div>
          <div class="col-sm-6">
            <label class="form-label fw-bold">Confirma password</label>
            <input
              type="password"
              class="form-control"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
            />
          </div> -->
        </div>

        <!-- Email y Teléfono (si deseas en la misma fila) -->
        <div class="row g-3 mt-2">
          <div class="col-sm-6">
            <label class="form-label fw-bold">Email</label>
            <input type="email" class="form-control" [(ngModel)]="user.email" name="email" />
          </div>
          <div class="col-sm-6">
            <label class="form-label fw-bold">Teléfono</label>
            <input class="form-control" [(ngModel)]="user.phone" name="phone" />
          </div>
        </div>

        <!-- Puntos y Nivel (solo lectura) -->
        <div class="mt-3">
          <p>Puntos Acumulados: <strong>{{ user.points }}</strong></p>
          <p>Nivel: <strong>{{ user.level }}</strong></p>
        </div>

        <!-- Botones -->
        <div class="mt-4">
          <button type="button" class="btn btn-primary me-2" (click)="updateProfile()">
            CONFIRMAR
          </button>
          <button type="button" class="btn btn-secondary" (click)="onCancel()">
            CANCELAR
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
